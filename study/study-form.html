<form id="workForm" class="form-container">
  <!-- 字段和之前完全一致，只改form的id和添加提交事件 -->
  <div class="form-group">
    <label for="date">日期</label>
    <input type="date" id="date" name="date" required>
  </div>
  <!-- 其他字段不变，省略... -->
  <button type="submit" class="btn">提交记录</button>
</form>

<script>
// 本地存储逻辑
document.getElementById('workForm').addEventListener('submit', function(e) {
  e.preventDefault(); // 阻止表单跳转

  // 收集表单数据
  const formData = {
    date: document.getElementById('date').value,
    fileType: document.getElementById('file-type').value,
    readFile: document.getElementById('read-file').value,
    keyPoint: document.getElementById('key-point').value,
    unreadFile: document.getElementById('unread-file').value,
    todo: document.getElementById('todo').value,
    storage: document.getElementById('storage').value,
    remark: document.getElementById('remark').value
  };

  // 保存到浏览器本地存储
  let records = JSON.parse(localStorage.getItem('workRecords')) || [];
  records.push(formData);
  localStorage.setItem('workRecords', JSON.stringify(records));

  // 提交成功提示
  alert('记录保存成功！可在“我的记录”中查看');
  this.reset(); // 清空表单
});

// 可选：添加“查看本地记录”按钮，方便复制
function showLocalRecords() {
  const records = JSON.parse(localStorage.getItem('workRecords')) || [];
  if (records.length === 0) {
    alert('暂无本地记录');
    return;
  }
  // 格式化显示记录，方便复制到表格
  const recordText = records.map((item, index) => 
    `第${index+1}条：\n日期：${item.date}\n文件类型：${item.fileType}\n已看文件：${item.readFile}\n核心知识点：${item.keyPoint}\n未看文件：${item.unreadFile}\n待办事项：${item.todo}\n存储位置：${item.storage}\n备注：${item.remark}\n`
  ).join('\n');
  alert(recordText);
}
</script>

<!-- 添加查看本地记录按钮 -->
<button onclick="showLocalRecords()" class="btn" style="margin-top:10px;">查看本地记录</button>
<a href="work-table.html" class="back-link">添加新记录</a>
<a href="../index.html" class="back-link">返回首页</a>
